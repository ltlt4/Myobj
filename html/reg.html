<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>申请试用</title>
    <link rel="stylesheet" href="./css/login.css">
</head>

<body>
    <div class="modal-bg">
    </div>
    <div class="modal-bg-data">
            <p id="secbg" class="modal-p">注册成功</p>
            <button class="intbot" type="button" style="width:65%;border-radius:2px;margin-top:80px">关闭</button>
           </div>
    <section class="lg-secbg">
        <div class="secbg-div">
            <div class="container">
                <div class="row center">
                    <a href="#"><img src="./img/home/white-logo.svg"></a>
                    <p class="logo-bottom-text"></p>
                </div>
                <div class="center">
                    <div class="login-content" style="border:none">

                        <div class="resitBox" style="height:auto;  margin:auto; background-color:#FFFFFF">

                            <div id="boxTitle" style="width:100%; height:72px; line-height:72px; color:#595959; font-size:25px;">
                                申请试用
                            </div>
                            <div id="successBox" style="width:90%;margin:0 auto;display:none;">
                                <div style="width:100%; height:auto; margin-top:0px; color:#595959; font-size:14px; line-height:20px;">
                                    <p style="font-size:16px;">已收到您的试用申请！</p>
                                    <p>AbleCloud的客户经理会尽快与您联系，请您保持联系方式畅通。</p>
                                    <p style="color:#FF0000"> </p>
                                    <a href="https://www.ablecloud.cn">
                                        <button style="background-color:#d23634; font-size:18px; color:#ffffff; width:260px; margin-top:10px;margin-bottom:20px; height:50px; font-size:18px;border:none; "
                                            type="button">更多信息返回官网浏览</button>
                                    </a>
                                </div>
                                <div style="width:100%; height:120px;">
                                </div>
                            </div>
                            <form class="form apply-form" method="post" id="myform" name="myform">

                                <fieldset style="border: none; width: 90%; margin: 0px auto;" id="registBox">
                                    <div>
                                        <p id="messageTip" style="color:#BDBDBF; text-align:left;font-size:14px; line-height:24px; margin-top:0px; margin-bottom:5px;">欢迎申请AbleCloud开发者体验帐号。请留下联系方式，我们的工作人员将第一时间与您联系。</p>
                                    </div>
                                    <div style=" position:relative; color:#b94a48;">
                                        <input type="text" id="name" class="applyInput" placeholder="姓名" name="name" style="color:#000000; background-color:#FFFFFF; ">
                                        <div id="nameError" class="errorBox" style="display:none"></div>
                                    </div>
                                    <div style="position:relative;color:#b94a48;">
                                        <input type="text" id="phone" name="phone" class="applyInput" placeholder="电话" value="" style="color:#000000; background-color:#FFFFFF;">
                                        <div id="phoneError" class="errorBox" style="display:none"></div>
                                    </div>

                                    <div style=" width:100%;position:relative;color:#b94a48; ">
                                        <input type="password" id="pwd" name="pwd" class="applyInput" value="" placeholder="密码" style="color:#000000; background-color:#FFFFFF;">
                                        <div id="emailError" class="errorBox" style="display:none">
                                            密码长度太短，请输入6位以上的密码
                                        </div>
                                    </div>
                                    <div style=" width:100%;position:relative;color:#b94a48; ">
                                        <input type="text" id="mail" name="email" class="applyInput" value="" placeholder="邮箱" style="color:#000000; background-color:#FFFFFF;">
                                        <div id="emailError" class="errorBox" style="display:none">
                                            邮箱已经被注册
                                        </div>
                                    </div>
                                    <div class="item" style="position:relative;color:#b94a48;">
                                        <input type="text" id="company" name="company" class="applyInput" value="" placeholder="公司名称" style="color:#000000; background-color:#FFFFFF;">
                                        <div id="companyError" class="errorBox" style="display:none"></div>
                                    </div>
                                    <div class="item" style="position:relative;color:#b94a48;">
                                        <textarea type="textarea" id="introduce" name="introduce" class="applyInput" value="" placeholder="您的产品及需求简介" style="border: #d3d3d3 1px solid; font-size:1rem; color:#000000;padding:10px 10px;height:100px; background-color:#FFFFFF;"></textarea>

                                        <div id="introduceError" class="errorBox" style="display:none"></div>
                                    </div>
                                    <div class="item">
                                        <input  class="intbot" type="submit" name="sub" disabled="false")>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="./js/common.js"></script>
    <script src="./js/jquery-1.11.3.js"></script>
    <script>
        $("#myform").on({
            "focus":function(e){
            var $dex=$(this)  
            $dex.addClass("box-s")},
            "blur":function(e){
            var $dex=$(this)
            $dex.removeClass("box-s")
       
        }
           
       },
       "input")
       function err (name,reg,tip){
           var $txt=$(`input[name=${name}]`);
            if(!reg.test($txt[0].value)){
            $txt.next().show().html(`${tip}`)
            $(":submit").attr("disabled","false")
            }else{
                $txt.next().hide()
                $(":submit").removeAttr("disabled");
        }
       }
       $("#myform").on("blur",":input",function(){
             err("name", /^([\u4e00-\u9fa5\·]{2,10})$/,"请输入正确的姓名")
             err("phone",/^(((13|14|15|18|17)\d{9}))$/,"请输入正确的电话号码")
             err("email",/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,"请输入正确的邮箱")
       })

       $("#myform").submit(function(e){
        e.preventDefault()
        $(".modal-bg").show()
        $(".modal-bg-data").show()
        $(".modal-bg-data").children().last().on("click",function(){
            $(".modal-bg").hide()
            $(".modal-bg-data").hide()
        })
        var xhr = createXhr()
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {
                var res = xhr.responseText;
                console.log(res);
            }
        }
        var $uname = $("#name")[0].value
        var $phone = $("#phone")[0].value
        var $mail = $("#mail")[0].value
        var $com = $("#company")[0].value
        var $int = $("#introduce")[0].value
        var $upwd=$("#pwd")[0].value
        xhr.open("post", "/user/reg", true)
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        var formdata = "name=" + $uname + "&phone=" + $phone +"&pwd="+$upwd+"&mail=" + $mail + "&company=" + $com + "&introduce=" + $int
        console.log(formdata)
        xhr.send(formdata)
    })
    </script>
</body>

</html>